# ===================================================================
# COMMON CONFIGURATION
#
# This file contains default properties shared across all profiles (dev, prod, etc.).
# Profile-specific properties in files like 'application-dev.yml' will override these values.
# ===================================================================
server:
  port: 8082

spring:
  application:
    name: joycrew
  # Specifies the default active profile.
  profiles:
    active: dev
  # Common mail server settings used by all profiles.
  mail:
    host: smtp.gmail.com
    port: 587
    properties:
      mail:
        smtp:
          auth: true
          starttls:
            enable: true

# API documentation (Swagger/OpenAPI) settings.
springdoc:
  api-docs:
    path: /v3/api-docs
  swagger-ui:
    path: /swagger-ui.html

# Default JWT settings.
jwt:
  # Default access token expiration: 1 hour (3,600,000 ms)
  expiration-ms: 3600000
  # Password reset token expiration: 15 minutes (900,000 ms)
  password-reset-expiration-ms: 900000

# Common logging settings.
logging:
  pattern:
    console: "%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n"
  level:
    com.joycrew.backend: INFO

# Application-specific common properties.
app:
  # Default frontend URL, primarily for the 'dev' environment.
  frontend-url: http://localhost:3000

  # KYC / SMS verification (defaults for all profiles)
  sms:
    provider: solapi
    from-number: "01044907174"

  kyc:
    # KYC 토큰 서명키(32바이트+ 권장). 환경변수로 주입 가능.
    token-secret: ${KYC_TOKEN_SECRET:CHANGE_ME_TO_LONG_RANDOM_SECRET}
    # KYC 토큰 유효시간(분)
    token-ttl-minutes: 10

solapi:
  api-key: ${SOLAPI_API_KEY}
  api-secret: ${SOLAPI_API_SECRET}
  base-url: "https://api.solapi.com"

# OTP policy (코드 유효/재전송/시도 제한)
otp:
  ttl-minutes: 5                # OTP 유효시간(분)
  max-attempts: 5               # 최대 시도 횟수
  resend-cooldown-seconds: 30   # 재전송 쿨다운(초)

# AWS specific settings
aws:
  region: 'ap-northeast-2'
  s3:
    bucket-name: 'joycrew-dev-bucket'

# view-cleanup-scheduling
jobs:
  recent-view-cleanup:
    enabled: true
    cron: "0 0 3 * * *"